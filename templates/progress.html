{% extends "nav.html" %}
{% block head %}
<!DOCTYPE html>
<html>
<head>
<Title>BUDGET APP</Title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css">
<link rel="stylesheet" href="{{ url_for('static', filename = 'style.css')}}">
<link rel="stylesheet" href="{{ url_for('static', filename = 'loading-bar.css')}}">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="row">
    <!-- background image  -->
    <div class="header-image">
        <!-- login form -->
        <div class="col-lg-2">
        
        </div><!-- col-lg-4 --> 
    </div><!-- header-image-->
        </div><!-- row -->
    <div class="row">
 {% endblock %}

    
  {% block content %}
    </div>
    <div class="row">
      <div class="col-lg-6 input">
<h2>Budget - July 2018</h2>

   <form class="form-inline" autocomplete="off" action="/save-budget" method="post">
  
  <table class="table-striped">

  <tr>
  <div class="form-group" action="/budget" method="POST">

   <td><label for="email">Donations</label></td>
   <td><input type="number" class="form-control" id="email" name="don" value="{{ budget_amt[0] }}"></td>
  </div>
  </tr>

  <tr>
  <div class="form-group">

   <td><label for="email">Entertainment</label></td>
   <td><input type="number" class="form-control" id="email" name="ent" value="{{ budget_amt[1] }}"></td>
  </div>
  </tr>

  <tr>
  <div class="form-group">

   <td><label for="email">Gas</label></td>
   <td><input type="number" class="form-control" id="email" name="gas" value="{{ budget_amt[2] }}"></td>
  </div>
  </tr>

  <tr>
  <div class="form-group">

   <td><label for="email">Groceries</label></td>
   <td><input type="number" class="form-control" id="email" name="gro" value="{{ budget_amt[3] }}"></td>
  </div>
  </tr>

  <tr>
  <div class="form-group">

   <td><label for="email">Insurance</label></td>
   <td><input type="number" class="form-control" id="email" name="ins" value="{{ budget_amt[4] }}"></td>
  </div>
  </tr>

    <tr>
  <div class="form-group">

   <td><label for="email">Miscellaneous</label></td>
   <td><input type="number" class="form-control" id="email" name="misc" value="{{ budget_amt[5] }}"></td>
  </div>
  </tr>

    <tr>
  <div class="form-group">

   <td><label for="email">Mortgage/Rent</label></td>
   <td><input type="number" class="form-control" id="email" name="rent" value="{{ budget_amt[6] }}"></td>
  </div>
  </tr>

    <tr>
  <div class="form-group">

   <td><label for="email">Restaurant/Dinning</label></td>
   <td><input type="number" class="form-control" id="email" name="rest" value="{{ budget_amt[7] }}"></td>
  </div>
  </tr>

  <tr>
  <div class="form-group">

   <td><label for="email">Shopping</label></td>
   <td><input type="number" class="form-control" id="email" name="shop" value="{{ budget_amt[8] }}"></td>
  </div>
  </tr>

    <tr>
  <div class="form-group">

   <td><label for="email">Transportation</label></td>
   <td><input type="number" class="form-control" id="email" name="trans" value="{{ budget_amt[9] }}"></td>
  </div>
  </tr>

    <tr>
  <div class="form-group">

   <td><label for="email">Travel</label></td>
   <td><input type="number" class="form-control" id="email" name="travel" value="{{ budget_amt[10] }}"></td>
  </div>
  </tr>

    <tr>
  <div class="form-group">

   <td><label for="email">Utilities</label></td>
   <td><input type="number" class="form-control" id="email" name="util" value="{{ budget_amt[11] }}"></td>
  </div>
  </tr>


</table>
<br> 
<button type="submit" class="btn btn-default">Submit</button>

</form>

    </div><!--col-lg-6-->


    <!-- progress bars -->
    <div class="col-lg-6 bars">

<table class="table">

<tr>
  <td>
<span> Donation  {{ amt[0] }}/{{ budget_amt[0] }}  </span>
<div class="progress progress-striped">
  <div class="progress-bar progress-bar-success don" role="progressbar" aria-valuenow="40"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">
   
  </div>
</div>
</td>

<td>
<span> Entertainment {{ amt[1] }}/{{ budget_amt[1] }} </span>
<div class="progress">
  <div class="progress-bar progress-bar-info ent" role="progressbar" aria-valuenow="50"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">
   
  </div>
</div>
</td>
</tr>

<tr>
  <td>
<span> Gas {{ amt[2] }}/{{ budget_amt[2] }} </span>
<div class="progress">
  <div class="progress-bar progress-bar-warning gas" role="progressbar" aria-valuenow="60"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">
  
  </div>
</div>
</td>

<td>
<span> Groceries {{ amt[3] }}/{{ budget_amt[3] }} </span>
<div class="progress">
  <div class="progress-bar progress-bar-warning gro" role="progressbar" aria-valuenow="60"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">
  
  </div>
</div>
</td>
</tr>

<tr>
  <td>
<span> Insurance {{ amt[4] }}/{{ budget_amt[4] }} </span>
<div class="progress">
  <div class="progress-bar progress-bar-danger ins" role="progressbar" aria-valuenow="70"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">

  </div>
</div>
</td>

<td>
<span> Miscellaneous {{ amt[5] }}/{{ budget_amt[5] }} </span>
<div class="progress">
  <div class="progress-bar progress-bar-danger misc" role="progressbar" aria-valuenow="70"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">
  
  </div>
</div>
</td>
</tr>

<tr>
  <td>
<span> Mortgage/Rent {{ amt[6] }}/{{ budget_amt[6] }} </span>
<div class="progress">
  <div class="progress-bar progress-bar-danger mort" role="progressbar" aria-valuenow="70"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">
  
  </div>
</div>
</td>

<td>
<span> Restaurant/Dining  {{ amt[7] }}/{{ budget_amt[7] }} </span>
<div class="progress">
  <div class="progress-bar progress-bar-danger rest" role="progressbar" aria-valuenow="70"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">
    
  </div>
</div>
</td>
</tr>

<tr>
  <td>
<span> Shopping {{ amt[8] }}/{{ budget_amt[8] }} </span>
<div class="progress">
  <div class="progress-bar progress-bar-danger shop" role="progressbar" aria-valuenow="70"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">
    
  </div>
</div>
</td>

<td>
<span> Transportation {{ budget_amt[9] }}/{{ amt[9] }} </span>
<div class="progress">
  <div class="progress-bar progress-bar-danger trans" role="progressbar" aria-valuenow="70"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">
  
  </div>
</div>
</td>
</tr>


<tr>
  <td>
<span> Travel {{ budget_amt[10] }}/{{ amt[10] }} </span>
<div class="progress">
  <div class="progress-bar progress-bar-danger tra" role="progressbar" aria-valuenow="70"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">
   
  </div>
</div>
</td>

<td>
<span> Utilities {{ amt[11] }}/{{ budget_amt[11] }} </span>
<div class="progress">
  <div class="progress-bar progress-bar-danger util" role="progressbar" aria-valuenow="70"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">
  
  </div>
</div>
</td>
</tr>
</table>

    </div><!--col-lg-6-->
    </div><!-- row -->
  
  <div class="row">                                                                                
  <div class="details">         
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Date</th>
        <th>Description</th>
        <th>Amount</th>
        <th>Category</th>
      </tr>
    </thead>
    <tbody>
           {% for i in data %}
      <tr>
        <td>{{ i["Date"] | replace("00:00:00.000000","")}}</td>
        <td>{{ i["Description"] }}</td>
        <td>{{ "${:,.2f}".format(i["Amount"])}}</td>
        <td>{{ i["Category"] }}</td>
      </tr>
         {% endfor %}
    </tbody>
  </table>
</div><!-- row -->
</div>
</div>
    

 
    </div><!-- container-->
    <script src="https://codepen.io/anon/pen/aWapBE.js"></script><!-- color generator -->
    <script type="text/javascript" src="{{ url_for('static', filename = 'loading-bar.js')}}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <script type="text/javascript">

    var don = "{{  ( amt[0]/budget_amt[0] ) * 100   }}";
    var ent = "{{  ( amt[1]/budget_amt[1] ) * 100   }}";
    var gas = "{{  ( amt[2]/budget_amt[2] ) * 100   }}";
    var gro = "{{  ( amt[3]/budget_amt[3] ) * 100   }}";
    var ins = "{{  ( amt[4]/budget_amt[4] ) * 100   }}";
    var misc = "{{  ( amt[5]/budget_amt[5] ) * 100   }}";
    var mort = "{{  ( amt[6]/budget_amt[6] ) * 100   }}";
    var rest = "{{  ( amt[7]/budget_amt[7] ) * 100   }}";
    var shop = "{{  ( amt[8]/budget_amt[8] ) * 100   }}";
    var trans = "{{  ( amt[9]/budget_amt[9] ) * 100   }}";
    var tra = "{{  ( amt[10]/budget_amt[10] ) * 100   }}";
    var util = "{{  ( amt[11]/budget_amt[11] ) * 100   }}";

//       $(".don").animate({
//     width: per + '%',
// }, 2500).css({ 'background-color': 'red'})

      function pcolor( obj, per ) { 

        if ( per < 50 ) color = '#69C184';
        if( per > 50 && per < 80 ) color = '#EFC741';
        if ( per > 80 ) color = '#AC4546';

        percopy = per;
        if ( per > 100 ) per = 100;

            $(obj).animate({
    width: per + '%',
     }, 2500).css({ 'background-color': color }).text( parseFloat(percopy).toFixed(2) + "%" )

      }

    pcolor( ".don", don );
    pcolor( ".ent", ent );
    pcolor( ".gas", gas );
    pcolor( ".gro", gro );
    pcolor( ".ins", ins );
    pcolor( ".misc", misc );
    pcolor( ".mort", mort );
    pcolor( ".rest", rest );
    pcolor( ".shop", shop );
    pcolor( ".trans", trans );
    pcolor( ".tra", tra );
    pcolor( ".util", util );

    </script>
    
    <script src="{{ url_for('static', filename = 'app.js')}}"></script>
</body>
</html>
{% endblock %}
